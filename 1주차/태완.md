# Java의 정석

자바의 가장 중요한 특징은 운영체제에 독립적이라는 것이다.

자바로 작성된 프로그램은 운영체제의 종류에 관계없이 실행이 가능하기 때문에, 운영체제에 따라 프로그램을 전혀 변경하지 않고도 실행이 가능하다.

## 자바 언어의 특징

### 1. 운영체제에 독립적이다.

기존의 다른 언어는 운영체제에 맞춰서 개발하고, 다른 운영체제에 적용하려면 추가적인 작업이 필요했다. 그러나 자바는 JVM 덕분에 그런 작업이 필요하지 않다. 자바 응용프로그램은 운영체제나 하드웨어가 아닌 JVM하고만 통신하고 JVM이 자바 응용프로그램으로부터 전달받은 명령을 해당 운영체제가 이해할 수 있도록 변환하여 전달한다. 다만 JVM은 운영체제에 종속적이어서 오라클은 여러 운영체제에 설치할 수 있는 서로 다른 버전의 JVM을 제공하고 있다.

### 2. 객체 지향 언어이다.

### 3. 비교적 배우기 쉽다.

### 4. 자동 메모리 관리 (Garbage Collection)

기존에는 프로그램에서 사용하지 않는 메모리를 체크하고 반환하는 일을 소프트웨어 개발자가 했지만, 이제는 자바로 작성된 프로그램이 실행되면  가비지컬렉터가 자동적으로 메모리를 관리해주기 때문에 프로그래머는 메모리를 따로 관리하지 않아도 된다.

### 5. 네트워크와 분산처리를 지원한다.

풍부하고 다양한 네트워크 프로그래밍 라이브러리(Java API)를 통해 비교적 짧은 시간에 네트워크 관련 프로그램을 쉽게 개발할 수 있도록 지원한다.

### 6. 멀티쓰레드를 지원한다.

운영체제와 관계없이 자바로 멀티쓰레드 프로그램을 구현할 수 있다. 관련된 라이브러리(Java API)가 제공되므로 구현하기 쉽다. 그리고 여러 쓰레드에 대한 스케줄링을 자바 인터프리터가 담당하게 된다.

### 7. 동적 로딩을 지원한다.

자바로 작성된 애플리케이션은 여러 개의 클래스로 구성되어 있는데, 동적 로딩을 지원하기 때문에 프로그램 실행 시에 모든 클래스가 로딩되지 않고 필요한 시점에 클래스를 로딩하여 사용할 수 있다는 장점이 있다.

또한 일부 클래스가 변경되어도 전체 애플리케이션을 다시 컴파일하지 않아도 된다.

## 자바는 느리다?

자바의 단점으로는 속도문제가 가장 대표적인 것인데, 바이트코드를 하드웨어의 기계어로 바로 변환해주는 JIT 컴파일러와 Hotspot과 같은 신기술의 도입으로 JVM의 기능이 향상됨으로써 속도문제가 상당히 개선되었다.

## JVM (Java Virtual Machine)

자바로 작성된 애플리케이션은 모두 이 가상 컴퓨터(JVM)에서만 실행되기 때문에, 자바 애플리케이션이 실행되기 위해서는 반드시 JVM이 필요하다.

## JDK와 JRE

JDK - 자바개발도구(Java Development Kit)

JRE - 자바실행환경(Java Runtime Environment), 자바로 작성된 응용프로그램이 실행되기 위한 최소 환경

JDK = JRE + 개발에 필요한 실행파일(javac.exe 등)

JRE = JVM + 클래스 라이브러리(Java API)

JDK를 설치하면 JVM과 Java API 외에 자바를 개발하는데 필요한 프로그램들이 설치된다.

JDK가 설치된 디렉토리의 bin 디렉토리를 환경 변수 path에 추가해줘야 하는 이유는, 이 디렉토리에 자바로 프로그램을 개발하는데 필요한 실행파일들이 들어있고, OS는 그 위치를 파악하고 있으면 파일 경로없이 파일 이름만으로도 사용할 수 있게 되기 때문이다.

JDK/bin 디렉토리에 있는 주요 실행파일들은 다음과 같다.

- javac.exe
    
    자바 컴파일러이다. 자바 소스코드를 바이트코드로 컴파일한다.

    
- java.exe
    
    자바 인터프리터이다. 컴파일러가 생성한 바이트코드를 해석하고 실행한다.

    
- javap.exe
    
    역어셈블러이다. 컴파일된 클래스파일을 원래의 소스로 변환한다.

    
- javadoc.exe
    
    자동문서생성기이다. 소스파일에 있는 주석을 이용하여 Java API문서와 같은 형식의 문서를 자동으로 생성한다.

    
- jar.exe
    
    압축프로그램이다. 클래스파일과 프로그램의 실행에 관련된 파일을 하나의 jar파일로 압축하거나 압축해제한다.


# 백기선님 자바 스터디

## 목표

자바 소스 파일(.java)을 JVM으로 실행하는 과정 이해하기

## 학습할 것

- JVM이란 무엇인가
- 컴파일 하는 방법
- 실행하는 방법
- 바이트코드란 무엇인가
- JIT 컴파일러란 무엇이며 어떻게 동작하는지
- JVM 구성 요소
- JDK와 JRE의 차이

## JVM이란 무엇인가

JVM은 OS와 자바 어플리케이션 사이에서 동작하면서 컴퓨터가 자바 프로그램을 실행할 수 있도록 도와준다. 

자바는 OS에 종속적이지 않지만, JVM은 종속적이다.

### JVM의 구성 요소

크게 4가지로 나뉜다. 클래스 로더 시스템, 메모리, 실행 엔진, 네이티브 메서드 인터페이스.

- 클래스 로더 시스템
  
  자바 프로그램을 실행시키면, 바이트코드를 읽어서 메모리에 배치한다.
  

- 메모리 (런타임 데이터 영역)
  
  자바 프로그램이 실행됨으로써 JVM 프로세스가 만들어지는 것이고, JVM은 OS에게서 메모리를 할당받는다. 
  
  메모리는 5가지 영역으로 나뉘고, 메서드 영역과 힙 영역은 모든 쓰레드가 공유하고, 나머지 영역은 쓰레드별로 각기 생성되어 정보가 공유되지 않는다. 
  
    - 메서드 영역 : 클래스 이름, 메서드, 변수 등의 정보 저장
    - 힙 영역 : 객체(인스턴스) 저장
    - 스택 영역 : 메서드 호출될 때마다 스택 프레임 생성, 종료될 때 제거
    - PC(Program Counter) 영역 : 쓰레드 내에서 현재 실행할 스택 프레임을 가리키느 포인터가 생성됨
    - 네이티브 메서드 스택 : C, C++로 구현된 메서드 호출 할 수 있도록 할당된 구역
  

- 실행 엔진
    
  실행 엔진 구성요소로 인터프리터, JIT 컴파일러, 가비지 컬렉터가 있다.

  - 인터프리터
    
    인터프리터는 바이트코드를 한 줄 한 줄 기계어로 해석하는 방식이다.
  
  - JIT 컴파일러
    
    JIT 컴파일러는 반복되는 코드가 있을 때 기계어로 해석하여 캐싱해놓고 재사용하는 방식이다. 반복적인 코드가 있다면 바로 실행할 수 있게 되기 때문에 속도가 향상된다.
    
    이때, JIT 자체가 빠른 게 아니라 JIT가 일종의 쓰레드 형태로 인터프리터와 같이 동작하기 때문에 빠른 것이다.

  - 가비지 컬렉터
    
    더이상 참조되지 않는 객체를 모아서 정리한다.
  

## Hotspot JVM?

Hotspot은 말 그대로 Hot한 Spot, 자주 수행되는 메서드를 찾아서 해당 부분에서는 JIT 컴파일러를 사용하는 방법이다. 

내부적으로 프로파일링을 통해 핫스팟을 찾아내고, 어떤 메서드가 얼마나 자주 수행되는지 체크하고 일정 기준을 넘는다면 해당 부분에 대한 네이티브 코드를 생성한다.

현재는 그냥 JVM이라고 부르고 있다.





